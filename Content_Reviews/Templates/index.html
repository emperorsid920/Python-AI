<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Content Moderation Dashboard</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="/static/css/dashboard.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Content Moderation Dashboard</h1>
            <p>Automated review processing and moderation system</p>
        </header>

        <nav class="nav-tabs">
            <button class="tab-btn active" data-tab="dashboard">Dashboard</button>
            <button class="tab-btn" data-tab="upload">Upload</button>
            <button class="tab-btn" data-tab="results">Results</button>
            <button class="tab-btn" data-tab="analytics">Analytics</button>
        </nav>

        <!-- Dashboard Tab -->
        <div class="tab-content active" id="dashboard">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üìä</div>
                    <div class="stat-info">
                        <h3 id="total-reviews">0</h3>
                        <p>Total Reviews</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚úÖ</div>
                    <div class="stat-info">
                        <h3 id="approved-reviews">0</h3>
                        <p>Approved</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚ö†Ô∏è</div>
                    <div class="stat-info">
                        <h3 id="flagged-reviews">0</h3>
                        <p>Flagged</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üîç</div>
                    <div class="stat-info">
                        <h3 id="pending-reviews">0</h3>
                        <p>Pending Review</p>
                    </div>
                </div>
            </div>

            <div class="dashboard-section">
                <h2>Recent Activity</h2>
                <div class="activity-feed" id="activity-feed">
                    <div class="activity-item">
                        <div class="activity-icon">üìÅ</div>
                        <div class="activity-content">
                            <p><strong>System Status:</strong> Ready for file upload</p>
                            <span class="activity-time">Just now</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="dashboard-section">
                <h2>System Status</h2>
                <div class="status-grid">
                    <div class="status-item">
                        <div class="status-indicator" id="db-status"></div>
                        <span>Database Connection</span>
                    </div>
                    <div class="status-item">
                        <div class="status-indicator" id="model-status"></div>
                        <span>ML Models</span>
                    </div>
                    <div class="status-item">
                        <div class="status-indicator" id="processing-status"></div>
                        <span>Processing Queue</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Upload Tab -->
        <div class="tab-content" id="upload">
            <div class="upload-section">
                <h2>Upload Reviews</h2>
                <div class="upload-area" id="upload-area">
                    <div class="upload-icon">üìÅ</div>
                    <h3>Drop your CSV file here</h3>
                    <p>or click to browse</p>
                    <input type="file" id="file-input" accept=".csv" style="display: none;">
                    <button class="btn btn-primary" onclick="document.getElementById('file-input').click()">
                        Choose File
                    </button>
                </div>

                <div class="upload-info">
                    <h4>File Requirements:</h4>
                    <ul>
                        <li>CSV format only</li>
                        <li>Maximum file size: 16MB</li>
                        <li>Required columns: review_text, author (optional)</li>
                    </ul>
                </div>
            </div>

            <div class="progress-section" id="progress-section" style="display: none;">
                <h3>Processing Progress</h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <div class="progress-info">
                    <span id="progress-text">Initializing...</span>
                    <span id="progress-percent">0%</span>
                </div>
                <div class="processing-details" id="processing-details"></div>
            </div>
        </div>

        <!-- Results Tab -->
        <div class="tab-content" id="results">
            <div class="results-header">
                <h2>Review Results</h2>
                <div class="results-controls">
                    <select id="sentiment-filter">
                        <option value="">All Sentiments</option>
                        <option value="positive">Positive</option>
                        <option value="neutral">Neutral</option>
                        <option value="negative">Negative</option>
                    </select>
                    <select id="spam-filter">
                        <option value="">All Reviews</option>
                        <option value="spam">Spam</option>
                        <option value="not_spam">Not Spam</option>
                    </select>
                    <select id="moderation-filter">
                        <option value="">All Status</option>
                        <option value="pending">Pending</option>
                        <option value="approved">Approved</option>
                        <option value="rejected">Rejected</option>
                    </select>
                    <button class="btn btn-secondary" id="download-btn">Download Results</button>
                </div>
            </div>

            <div class="results-table-container">
                <table class="results-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Review Text</th>
                            <th>Sentiment</th>
                            <th>Spam</th>
                            <th>Toxicity</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="results-tbody">
                        <!-- Results will be populated here -->
                    </tbody>
                </table>
            </div>

            <div class="pagination" id="pagination">
                <!-- Pagination controls will be added here -->
            </div>
        </div>

        <!-- Analytics Tab -->
        <div class="tab-content" id="analytics">
            <div class="analytics-grid">
                <div class="chart-container">
                    <h3>Sentiment Distribution</h3>
                    <canvas id="sentiment-chart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>Spam Detection</h3>
                    <canvas id="spam-chart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>Moderation Queue</h3>
                    <canvas id="moderation-chart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>Processing Over Time</h3>
                    <canvas id="timeline-chart"></canvas>
                </div>
            </div>

            <div class="analytics-summary">
                <h3>Summary Statistics</h3>
                <div class="summary-grid">
                    <div class="summary-item">
                        <h4>Average Sentiment Score</h4>
                        <span id="avg-sentiment">0.0</span>
                    </div>
                    <div class="summary-item">
                        <h4>Spam Detection Rate</h4>
                        <span id="spam-rate">0%</span>
                    </div>
                    <div class="summary-item">
                        <h4>Toxicity Rate</h4>
                        <span id="toxicity-rate">0%</span>
                    </div>
                    <div class="summary-item">
                        <h4>Manual Review Required</h4>
                        <span id="manual-review">0%</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Review Details -->
    <div class="modal" id="review-modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Review Details</h2>
            <div id="review-details"></div>
            <div class="modal-actions">
                <button class="btn btn-success" onclick="updateModerationStatus('approved')">Approve</button>
                <button class="btn btn-danger" onclick="updateModerationStatus('rejected')">Reject</button>
                <button class="btn btn-secondary" onclick="updateModerationStatus('pending')">Mark Pending</button>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toast-container"></div>

    <script src="/static/js/app.js"></script>
    <script src="/static/js/dashboard.js"></script>
    <script src="/static/js/upload.js"></script>
    <script src="/static/js/results.js"></script>
    <script src="/static/js/analytics.js"></script>
</body>
</html>